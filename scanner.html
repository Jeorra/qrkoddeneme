<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mobile Scanner Simulator</title>
    <style>
        body { font-family: sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; margin: 0; background-color: #e8f0fe; }
        #scanner-form { display: flex; flex-direction: column; background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h1 { margin-top: 0; }
        label { margin-top: 15px; }
        input { margin-top: 5px; padding: 8px; font-size: 1em; }
        button { margin-top: 20px; padding: 10px; font-size: 1em; background-color: #4285f4; color: white; border: none; border-radius: 4px; cursor: pointer; }
        #response { margin-top: 20px; }
    </style>
</head>
<body>
    <div id="scanner-form">
        <h1>Mobile Scanner Simulator</h1>
        <label for="sessionId">Session ID (from QR):</label>
        <input type="text" id="sessionId" placeholder="Enter session ID from QR code">
        
        <label for="userId">User ID (logged in user):</label>
        <input type="text" id="userId" value="123"> 

        <button onclick="confirmScan()">Confirm Scan</button>

        <p id="response"></p>
    </div>

    <script>
        async function confirmScan() {
            const sessionId = document.getElementById('sessionId').value;
            const userId = document.getElementById('userId').value;
            const responseEl = document.getElementById('response');

            if (!sessionId || !userId) {
                responseEl.textContent = 'Please enter both Session ID and User ID.';
                responseEl.style.color = 'red';
                return;
            }

            const formData = new FormData();
            formData.append('sessionId', sessionId);
            formData.append('userId', userId);

            try {
                const response = await fetch('/api/confirm-scan', {
                    method: 'POST',
                    body: formData
                });

                const result = await response.json();

                if (response.ok) {
                    responseEl.textContent = `Success: ${result.message}`;
                    responseEl.style.color = 'green';
                } else {
                    responseEl.textContent = `Error: ${result.error}`;
                    responseEl.style.color = 'red';
                }
            } catch (error) {
                responseEl.textContent = 'A network error occurred.';
                responseEl.style.color = 'red';
            }
        }
    </script>
</body>
</html>
